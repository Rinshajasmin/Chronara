

 <head>
    <link rel="stylesheet" href="/css/user/usersignup.css">
</head> 
     {{!-- <header class="navbar">
        <div class="logo">chronara</div>
        <nav>
            <ul class="nav-links">
                <li><a href="/user/home">Home</a></li>
                <li><a href="#">Contact</a></li>
                <li><a href="#">About</a></li>
            </ul>
        </nav>
        <div class="auth-links">
            <a href="/user/login">Login</a> | <a href="/user/usersignup">Signup</a>
        </div>
    </header>  --}}
    {{>userHeadernw}}
  <div class="container">
    <div class="left-section">
      <img src="/images/Luxury_Modern_Swiss_Watch_Clock_Logo-removebg-preview-removebg-preview.png" alt="Chronara Logo" class="logo">
    </div>
    <div class="right-section">
      <form class="signup-form" id="signupform" method="post" action="/user/usersignup " name="signupform">
        <h1>Signup</h1>
        <label for="username">Full Name</label>
        <input type="text" id="username" placeholder="fullname" name="username">
        <div id="error1" class="error-message"></div>

        <label for="email">Email</label>
        <input type="email" id="email" placeholder="example@email.com" name="email">
                <div id="error2" class="error-message"></div>


        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password" name="password">
                <div id="error3" class="error-message"></div>


        <label for="confirm-password">Confirm Password</label> 
        <input type="password" id="confirmpassword" placeholder="Enter your password" name="confirmpassword">
                <div id="error4" class="error-message"></div>


        <label for="phone">Phone Number </label>
        <input type="tel" id="phone" placeholder="Enter your phone number" name="phone">
                        <div id="error5" class="error-message"></div>

        <label for="referralCode">Referral Code</label> 
        <input type="text" id="referralCode" placeholder="Optional" name="referralCode">
        <div id="error6" class="error-message"></div>

            {{#if message}}
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
          <strong>Error!</strong> {{message}}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {{/if}}




        <a href="#" class="forgot-password">Forgot password?</a>

        <button type="submit" class="submit-button">Register</button>

        <p class="login-link">Already have an account? <a href="#">Login Now</a></p>

        <div class="divider">OR</div>

        <a href="/user/auth/google" class="google-button">
          <img src="/images/Google_Icons-09-512.webp" alt="Google">
            
          Continue with Google</a>
      </form>
    </div>
  </div>
{{!-- <script>
  document.addEventListener("DOMContentLoaded", function () {
    signupform.addEventListener("submit", function (e) {
      const isNameValid = nameValidate();
      const isEmailValid = emailValidate();
      const isPasswordValid = passwordValidate();
      const isPhoneValid = phoneValidate();

      // If any validation fails, block form submission
      if (!isNameValid || !isEmailValid || !isPasswordValid || !isPhoneValid) {
        e.preventDefault(); // Block form submission
      }
    });
  });

  // Validation functions

  function nameValidate() {
    const nameval = usernameid.value.trim();
    const namepattern = /^[A-Za-z\s]+$/;

    if (nameval === "") {
      error1id.style.display = "block";
      error1id.innerHTML = "Please enter a valid name";
      return false;
    } else if (!namepattern.test(nameval)) {
      error1id.style.display = "block";
      error1id.innerHTML = "Name can only contain alphabets and spaces";
      return false;
    } else {
      error1id.style.display = "none";
      error1id.innerHTML = "";
      return true;
    }
  }

  function emailValidate() {
    const emailval = emailid.value.trim();
    const emailpattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

    if (emailval === "") {
      error2id.style.display = "block";
      error2id.innerHTML = "Email is required";
      return false;
    } else if (!emailpattern.test(emailval)) {
      error2id.style.display = "block";
      error2id.innerHTML = "Invalid email format";
      return false;
    } else {
      error2id.style.display = "none";
      error2id.innerHTML = "";
      return true;
    }
  }

  function phoneValidate() {
    const phoneval = phoneid.value.trim();

    if (phoneval === "") {
      error5id.style.display = "block";
      error5id.innerHTML = "Enter a valid phone number";
      return false;
    } else if (phoneval.length !== 10) {
      error5id.style.display = "block";
      error5id.innerHTML = "Enter 10 digits";
      return false;
    } else {
      error5id.style.display = "none";
      error5id.innerHTML = "";
      return true;
    }
  }

  function passwordValidate() {
    const passwordval = passwordid.value;
    const cpasswordval = confirmpasswordid.value;
    const alpha = /[a-zA-Z]/;
    const digit = /\d/;

    if (passwordval.length < 8) {
      error3id.style.display = "block";
      error3id.innerHTML = "Should contain at least 8 characters";
      return false;
    } else if (!alpha.test(passwordval) || !digit.test(passwordval)) {
      error3id.style.display = "block";
      error3id.innerHTML = "Should contain both letters and numbers";
      return false;
    } else {
      error3id.style.display = "none";
      error3id.innerHTML = "";
    }

    if (passwordval !== cpasswordval) {
      error4id.style.display = "block";
      error4id.innerHTML = "Passwords do not match";
      return false;
    } else {
      error4id.style.display = "none";
      error4id.innerHTML = "";
      return true;
    }
  }
</script> --}}
<script>
  document.addEventListener("DOMContentLoaded", function () {
        console.log("Script loaded successfully!"); // Add this for testing

    // Fetch the form and input elements
    const signupForm = document.getElementById("signupform");
    const usernameField = document.getElementById("username");
    const emailField = document.getElementById("email");
    const passwordField = document.getElementById("password");
    const confirmPasswordField = document.getElementById("confirmpassword");
    const phoneField = document.getElementById("phone");
    const error1 = document.getElementById("error1");
    const error2 = document.getElementById("error2");
    const error3 = document.getElementById("error3");
    const error4 = document.getElementById("error4");
    const error5 = document.getElementById("error5");

    // Validation functions
    function nameValidate() {
      const nameValue = usernameField.value.trim();
      const namePattern = /^[A-Za-z\s]+$/;

      if (nameValue === "") {
        error1.style.display = "block";
        error1.innerHTML = "Please enter a valid name";
        return false;
      } else if (!namePattern.test(nameValue)) {
        error1.style.display = "block";
        error1.innerHTML = "Name can only contain alphabets and spaces";
        return false;
      } else {
        error1.style.display = "none";
        error1.innerHTML = "";
        return true;
      }
    }

    function emailValidate() {
      const emailValue = emailField.value.trim();
      const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

      if (emailValue === "") {
        error2.style.display = "block";
        error2.innerHTML = "Email is required";
        return false;
      } else if (!emailPattern.test(emailValue)) {
        error2.style.display = "block";
        error2.innerHTML = "Invalid email format";
        return false;
      } else {
        error2.style.display = "none";
        error2.innerHTML = "";
        return true;
      }
    }

    function passwordValidate() {
      const passwordValue = passwordField.value.trim();
      const confirmPasswordValue = confirmPasswordField.value.trim();
      const alpha = /[a-zA-Z]/;
      const digit = /\d/;

      if (passwordValue.length < 8) {
        error3.style.display = "block";
        error3.innerHTML = "Password must contain at least 8 characters";
        return false;
      } else if (!alpha.test(passwordValue) || !digit.test(passwordValue)) {
        error3.style.display = "block";
        error3.innerHTML = "Password must contain letters and numbers";
        return false;
      } else {
        error3.style.display = "none";
        error3.innerHTML = "";
      }

      if (passwordValue !== confirmPasswordValue) {
        error4.style.display = "block";
        error4.innerHTML = "Passwords do not match";
        return false;
      } else {
        error4.style.display = "none";
        error4.innerHTML = "";
        return true;
      }
    }

    function phoneValidate() {
      const phoneValue = phoneField.value.trim();

      if (phoneValue === "") {
        error5.style.display = "block";
        error5.innerHTML = "Enter a valid phone number";
        return false;
      } else if (phoneValue.length !== 10 || !/^\d+$/.test(phoneValue)) {
        error5.style.display = "block";
        error5.innerHTML = "Phone number must be 10 digits";
        return false;
      } else {
        error5.style.display = "none";
        error5.innerHTML = "";
        return true;
      }
    }

    function referralCodeValidate() {
  const referralCodeField = document.getElementById("referralCode");
  const referralCodeValue = referralCodeField.value.trim();

  // Assuming referral codes are alphanumeric and have a specific length (e.g., 6-10 characters)
  const referralCodePattern = /^[A-Za-z0-9]{6,10}$/;

  if (referralCodeValue !== "" && !referralCodePattern.test(referralCodeValue)) {
    // Show error if the referral code format is invalid
    error6.style.display = "block";
    error6.innerHTML = "Invalid referral code format. Must be 6-10 alphanumeric characters.";
    return false;
  } else {
    // Clear error if the field is valid or empty
    error6.style.display = "none";
    error6.innerHTML = "";
    return true;
  }
}

    // Form submission event listener
    signupForm.addEventListener("submit", function (e) {
      const isNameValid = nameValidate();
      const isEmailValid = emailValidate();
      const isPasswordValid = passwordValidate();
      const isPhoneValid = phoneValidate();
      const isReferralCodeValid = referralCodeValidate(); // Validate referral code


      // Check if all validations are successful
      const isFormValid = isNameValid && isEmailValid && isPasswordValid && isPhoneValid && isReferralCodeValid;

      // Debugging log
      console.log("Form validation result:", isFormValid);

      // Block submission if any validation fails
      if (!isFormValid) {
        e.preventDefault(); // Prevent the default form submission
        console.log("Form submission blocked due to validation errors.");
      }
    });
  });
</script>



    {{> userfooter}} <!-- Include the footer partial -->

