
<head>
    {{!-- <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet"> --}}
<!-- Ficons CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fiicons@latest/dist/fi-icons.css">

    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  />
</head>
<div class="page-header breadcrumb-wrap">
    {{!-- <div class="container">
        <div class="breadcrumb">
            <a href="/" rel="nofollow">Home</a>
            <span></span> {{category.name}}
            <span></span> {{product.productName}}
        </div>
    </div> --}}
     <header id="header" class="navbar">
        <div class="logo">chronara</div>
        <nav>
            <ul class="nav-links">
                <li><a href="/user/home">Home</a></li>
                <li><a href="/user/contact">Contact</a></li>
                <li><a href="/user/about">About</a></li>

                {{!-- <li><a href="/user/cart/?id={{_id}}" >Cart</a></li> --}}
            </ul>
        </nav>
        
         {{#if username}}
         <div class="shopping-icon">
              <a href="/user/cart/?id={{_id}}" class="cart-icon">
              
                <i class="fas fa-shopping-cart"></i> <!-- Cart icon -->
              </a>
        <div class="dropdown">
          
          <a class="sign-in-link" href="#">  
            
                   <i class="fas fa-user-circle"></i> <!-- Profile icon -->


            {{username}}
          </a>
          <div class="dropdown-content">
            <a  href="/user/userProfile">Profile</a>
            <a href="/user/getUserOrders">My Orders</a>
            <a  href="/user/logout">Logout</a>
          </div>
        </div>
        </div>
        
        {{else}}
        <div class="auth-links">
            <a href="/user/login">Login</a> | <a href="/user/usersignup">Signup</a>
        </div>
       {{/if}}  
 
    </header> 
{{!-- //<section class="breadcrumb-section"> --}}
  {{!-- <div class="container"> --}}
    <nav class="breadcrumb-nav">
      <ul class="breadcrumb-list">
        <li><a href="/user/home">Home</a></li>
        <li><a href="/user/shop">Shop</a></li>
        <li class="active">{{product.productName}}</li> <!-- Current Page -->
      </ul>
    </nav>
  {{!-- </div> --}}
{{!-- </section> --}}
<section class="mt-50 mb-50">
    <div class="container">
        <div class="row">
            <div class="col-lg-9">
                <div class="product-detail accordion-detail">
                    <div class="row mb-50">
                        <div class="col-md-6 col-sm-12 col-xs-12">
                            {{!-- <div class="detail-gallery">
                                <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                <div class="product-image-slider">
                                <figure class="border-radius-10">
                                <img src="{{product.productImage.[0]}}" alt="{{product.productName}}">
                                </figure>
                               </div>

                               <div class="slider-nav-thumbnails d-flex justify-content-center gap-3">
                                {{#each product.productImage}}
                                <div class="thumbnail-container">
                                  <img class="thumbnail" src="{{this}}" alt="{{../product.productName}}">
                                </div>
                               {{/each}}
                               </div>

                            </div> --}}
                            {{!-- <div class="detail-gallery">
    <span class="zoom-icon"><i class="fi-rs-search"></i></span>
    <div class="product-image-slider">
        <figure class="border-radius-10">
            <img id="main-image" src="{{product.productImage.[0]}}" alt="{{product.productName}}" />
        </figure>
    </div>

    <div class="slider-nav-thumbnails d-flex justify-content-center gap-3">
        {{#each product.productImage}}
            <div class="thumbnail-container">
                <img class="thumbnail" src="{{this}}" alt="{{../product.productName}}" />
            </div>
        {{/each}}
    </div>
                           </div>
                        </div> --}}


                        <div class="detail-gallery">
  <span class="zoom-icon"><i class="fi-rs-search"></i></span>

  <!-- Main Image -->
  <div class="product-image-slider">
    <figure class="border-radius-10">
      <img id="main-image" src="{{product.productImage.[0]}}" alt="{{product.productName}}" class="zoomable-image" />
    </figure>
  </div>

  <!-- Thumbnail Images -->
  <div class="slider-nav-thumbnails d-flex justify-content-center gap-3">
    {{#each product.productImage}}
      <div class="thumbnail-container">
        <img class="thumbnail" src="{{this}}" alt="{{../product.productName}}" data-full="{{this}}" />
      </div>
    {{/each}}
  </div>
</div>
                    </div>


                        <div class="col-md-6 col-sm-12 col-xs-12">
                            <div class="detail-info">
                                <h2 class="title-detail">{{product.productName}}</h2>
                                <div class="product-detail-rating">
    <div class="pro-details-brand">{{#if product.brand}}
        <span>Brand: {{product.brand}}</span>
    </div>
    {{/if}}
    <div class="product-rate d-inline-block">
    <span class="star-rating">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
    </span>


        <!-- Reviews -->
        <span class="font-small ml-10 text-muted">(25 reviews)</span>
    </div>


                               <div class="clearfix product-price-cover">
    <div class="product-price primary-color float-left">
        {{#if totalOffer}} 
            <!-- If there is a total offer, show the sale price -->
            <ins><span class="text-brand">₹{{product.salePrice}}</span></ins><br>
            <ins><span class="old-price font-md ml-15">₹{{product.regularPrice}}</span></ins>
        {{else}} 
            <!-- If there is no total offer, show the regular price -->
            <ins><span class="text-brand">₹{{product.regularPrice}}</span></ins>
        {{/if}}
        
        <span class="save-price font-md color3 ml-15">
            {{#if totalOffer}}
                Save {{totalOffer}}%
            {{else}}
                No offer
            {{/if}}
        </span>
    </div>
</div>

                                <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                <div class="short-desc mb-30">
                                    <p>{{product.productDesc}}</p>
                                </div>
                                <div class="product_sort_info font-xs mb-30">
                                    <ul>
                                        <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 1 Year Brand Warranty</li>
                                        <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> 30 Day Return Policy</li>
                                        <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery available</li>
                                    </ul>
                                </div>
                                <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                <div class="detail-extralink">
                                    <div class="detail-qty border radius">
                                        <a href="#" class="qty-down" onclick=""><i class="fi-rs-angle-small-down"></i></a>
                                        <span class="qty-val" id="quantity">Stocks left {{quantity}}</span>
                                        <a href="#" class="qty-up" onclick=""><i class="fi-rs-angle-small-up"></i></a>
                                    </div>
                                    <div class="product-extra-link2">
                                      {{#if quantity}}
                                        {{!-- <button type="submit" class="button button-add-to-cart" onclick="">Add to cart</button> --}}
                                        <button class="add-to-cart-btn btn btn-primary" data-product-id="{{_id}}" onclick="addToCart('{{_id}}')">Add to Cart</button>
                                       {{/if}}
                                        <a aria-label="Add To Wishlist" class="action-btn hover-up" href="#"><i class="fi-rs-heart"></i></a>
                                    </div>
                                </div>
                                <ul class="product-meta font-xs color-grey mt-50">
                                    <li class="mb-5">Stock Code: <a href="#">FWM15VKT</a></li>
                                    <li class="mb-5">Tags: {{category.name}}
                                        {{!-- {{#each category.name}}
                                        <a href="#" rel="tag">{{this}}</a>
                                        {{/each}} --}}
                                    </li>
                                    <li>Availability: 
                                        <span class="in-stock text-success ml-5">{{product.status}}</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{{>userfooter}}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.rawgit.com/elevateweb/elevatezoom/master/jquery.elevateZoom-3.0.8.min.js"></script>


{{!-- <script>
    $(document).ready(function(){
        // Change the main image when a thumbnail is clicked
        $(".thumbnail").click(function() {
            var newImage = $(this).attr("src");  // Get the src of the clicked thumbnail
            $("#main-image").attr("src", newImage);  // Update the main image
            $("#main-image").elevateZoom({  // Re-enable zoom on the new image
                zoomType: "inner",
                cursor: "crosshair",
                scrollZoom: true
            });
        });

        // Apply zoom effect to the main image initially
        $("#main-image").elevateZoom({
            zoomType: "inner",
            cursor: "crosshair",
            scrollZoom: true
        });
    });
</script> --}}


<script>
// Zoom effect on main image
const mainImage = document.getElementById('main-image');
const thumbnails = document.querySelectorAll('.thumbnail');

// Adding zoom effect to main image
mainImage.addEventListener('mouseover', function() {
  mainImage.classList.add('zoomed');
});

mainImage.addEventListener('mouseout', function() {
  mainImage.classList.remove('zoomed');
});

// Change main image when thumbnail is clicked
thumbnails.forEach((thumbnail) => {
  thumbnail.addEventListener('mouseover', function() {
    const newImage = thumbnail.getAttribute('data-full');
    mainImage.src = newImage;
  });
});

// Optionally, add the zoom effect to the new image when it changes
thumbnails.forEach((thumbnail) => {
  thumbnail.addEventListener('click', function() {
    const newImage = thumbnail.getAttribute('data-full');
    mainImage.src = newImage;
    // Reapply the zoom effect after switching the image
    mainImage.classList.add('zoomed');
  });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
 
<script>
    function addToCart(productId) {
        // You can use AJAX here to send the productId to your backend
        fetch('/user/addToCart', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ productId })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                Swal.fire({
                    title: 'Item Added!',
                    text: 'The item has been added to your cart.',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
                console.log(data.cartDetails);
            } else {
                Swal.fire({
                    title: 'Error!',
                    text: data.message || 'Something went wrong.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            }
        })
        .catch(error => {
            console.error('Error adding to cart:', error);
            Swal.fire({
                title: 'Error!',
                text: 'An unexpected error occurred.',
                icon: 'error',
                confirmButtonText: 'OK'
            });
        });
    }




</script>

<style>
    /* General Styles */
.container {
  max-width: 1200px;
  margin: 0 auto;
  margin-left: 154px;
}

.detail-gallery {
  position: relative;
}

.detail-gallery .product-image-slider {
  margin-bottom: 20px;
}

.detail-gallery figure {
  margin: 0;
  overflow: hidden;
}

.detail-gallery img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
}
.old-price {
    text-decoration: line-through;
    color: #888888; /* Optional: Makes the old price appear dimmer */
    font-size: 0.9em; /* Optional: Adjusts the font size for a subtle effect */
}
.product-detail {
    margin-left: 129px;
}


.slider-nav-thumbnails {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.thumbnail-container {
  flex: 0 1 calc(20% - 10px); /* Adjust percentage for number of thumbnails per row */
  max-width: 20%; /* Match the flex basis */
}

.thumbnail {
  width: 100%;
  border: 2px solid #ddd;
  border-radius: 5px;
  cursor: pointer;
  transition: border-color 0.3s ease;
}

.thumbnail:hover {
  border-color: #007bff;
}
/* Bold the text in detail-info section */
.detail-info {
  font-weight: bold;
}

.detail-info h2.title-detail {
  font-weight: bold;
  font-size: 22px;
  color: #333;
}

.detail-info .short-desc,
.detail-info .product-meta {
  font-size: 14px;
  color: #555;
  margin-top: 21px;
}
/* Main Image Zoom Effect */
.zoomable-image {
  transition: transform 0.3s ease;
  cursor: zoom-in;
}

.zoomable-image.zoomed {
  transform: scale(1.5); /* Adjust the scale for zoom effect */
}

/* Thumbnail Styling */
.thumbnail {
  width: 70px; /* Adjust the size of thumbnails */
  height: 70px;
  object-fit: cover;
  cursor: pointer;
  transition: opacity 0.3s ease;
}

.thumbnail:hover {
  opacity: 0.7; /* Add opacity change on hover for thumbnails */
}

/* Container for zoom */
.detail-gallery {
  position: relative;
}

/* Optional styling for zoom icon */
.zoom-icon {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 24px;
  color: #fff;
  z-index: 1;
  cursor: pointer;
}


.detail-info ul.product_sort_info li {
  font-size: 14px;
  color: #555;
}
.breadcrumb-section {
    padding: 15px 0;
    background-color: #f8f9fa; /* Light background */
}

.breadcrumb-nav {
     padding: 15px 0;
    background-color: #f8f9fa;
    font-size: 14px;
}

.breadcrumb-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
}

.breadcrumb-list li {
    display: inline;
}

.breadcrumb-list li a {
    text-decoration: none;
    color: #007bff; /* Blue color for links */
}

.breadcrumb-list li a:hover {
    text-decoration: underline;
}

.breadcrumb-list li.active {
    color: #6c757d; /* Gray color for the active/current page */
}

.breadcrumb-list li + li::before {
    content: '>';
    margin: 0 10px;
    color: #6c757d;
}
 

/* Add to Cart Button with Green Color */
.button.button-add-to-cart {
  background: #28a745; /* Green color */
  color: #fff;
  font-weight: bold;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.button.button-add-to-cart:hover {
  background: #218838; /* Darker green on hover */
}
/* Star Rating Styles */
.star-rating {
    color: #ffc107; /* Gold color for stars */
    font-size: 16px;
    display: inline-block;
}

.star-rating i {
    margin-right: 2px;
}

.product-rate-cover {
    display: flex;
    align-items: center;
    margin-left: 20px; /* Adjust this value to move it further right */
}


.font-small {
    font-size: 14px;
    color: #666;
}

.ml-10 {
    margin-left: 10px;
}

      .navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 40px;
    background-color: #f8f9fa;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.logo {
    font-size: 24px;
    font-weight: bold;
}

.nav-links {
    list-style: none;
    display: flex;
    gap: 20px;
}

.nav-links a {
    text-decoration: none;
    color: #333;
    font-weight: 500;
}

.auth-links a {
    text-decoration: none;
    color: #333;
    font-weight: 500;
}  
 .fas.fa-user-circle {
    margin-right: 8px; /* Space between icon and username */
    font-size: 20px;   /* Icon size */
    color: #333;       /* Icon color */
}
.fas.fa-shopping-cart {
    margin-right: 8px; /* Space between icon and username */
    font-size: 20px;   /* Icon size */
    color: #333;       /* Icon color */
}
.dropdown{
    position: relative;
    display: inline-block;
    
  } 
  .dropdown-content{
    display: none;
    position: absolute;
    background-color: white;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    right: 0;
  }
  .dropdown-content a{
    color: black;
    padding: 12px 16px ;
    text-decoration: none;
    display: block;
    width: 100%;
    }
    .dropdown-content a:hover{
        background-color: #f1f1f1;
    }
    .dropdown:hover .dropdown-content{
        display: block;
    }
    #header{
        position: relative;
        z-index: 500;
    }
     .shopping-icon a{
        text-decoration: none;
    }
  



@media (max-width: 768px) {
  .thumbnail-container {
    flex: 0 1 calc(33.33% - 10px); /* 3 per row for smaller screens */
  }
}

@media (max-width: 576px) {
  .thumbnail-container {
    flex: 0 1 calc(50% - 10px); /* 2 per row for mobile screens */
  }
}

</style>
